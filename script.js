// 产品价格数据
const productPrices = {
    // 好日子系列
    "好日子(吉祥)": 91.7,
    "好日子(精品)": 131.7,
    "好日子(软珍品)": 131,
    "好日子(祥和)": 135.7,
    "好日子(锦绣)": 163.5,
    "好日子(金尊)": 235,
    "好日子(细支金尊)": 256.5,
    "好日子(品彩)": 153.5,
    "好日子(欢乐颂)": 163,
    "好日子(城市之光)": 215,
    "好日子(金万世)": 263,
    "好日子(盛世)": 263,
    
    // 芙蓉王系列
    "芙蓉王(硬)": 208.5,
    "芙蓉王(硬细支)": 208.5,
    "芙蓉王(短支)": 205.5,
    "芙蓉王(领航)": 456,
    "芙蓉王(蓝盖王)": 293,
    "芙蓉王(硬爆珠马)": 290,
    "芙蓉王(红宝石)": 270,
    "芙蓉王(细蓝带)": 278,
    "芙蓉王(细蓝带)": 251.5,
    "芙蓉王(中支荣耀)": 320,
    "芙蓉王(细论表)": 244,
    "芙蓉王(细论表)": 440,
    "芙蓉王(细加特林)": 335,
    "芙蓉王(细品悦)": 251.5,
    "芙蓉王(硬爆珠马)": 290,
    "芙蓉王(红宝石)": 270,
    "芙蓉王(细蓝带)": 278,
    
    // 中华系列
    "中华(合中)": 373,
    "中华(合中 SZ)": 373,
    "中华(方中)": 376,
    "中华(细支)": 426,
    "中华(双中支)": 476,
    "中华(细金支)": 743,
    "中华(金细支)": 541,
    "中华(金中支)": 743,
    "中华(软中)": 542,
    "中华(软28 SZ)": 557,
    "中华(软28 SZ)": 558,
    "中华(软329 SZ)": 549,
    "中华(软330 SZ)": 550,
    "中华(硬330 SZ)": 552,
    
    // 红塔山系列
    "红塔山(白塔烟)": 97.2,
    "红塔山(软白)": 97.2,
    "红塔山(新势力)": 104.7,
    "红塔山(白塔年)": 102,
    "红塔山(新时代)": 138,
    "红塔山(传奇奇)": 138,
    "红塔山(细支传奇)": 145,
    "红塔山(新时代)": 138,
    "红塔山(传奇奇)": 138,
    
    // 真龙系列
    "真龙(红)": 83.7,
    "真龙(轩云)": 137,
    "真龙(珍品)": 150,
    "真龙(臻品)": 120,
    "真龙(起源)": 114.5,
    "真龙(真凌)": 217.5,
    "真龙(中支凌云)": 224,
    "真龙(细支凌云)": 144,
    "真龙(龙海)": 433,
    "真龙(木海海韵)": 133,
    "真龙(细蓝刘三刻)": 167,
    
    // 广州双喜系列
    "广州双喜(硬经典)": 127.7,
    "广州双喜(经典1906)": 124.9,
    "广州双喜(经典尊喜)": 133,
    "广州双喜(百年经典)": 132.7,
    "广州双喜(软01)": 132.7,
    "广州双喜(硬01)": 134,
    "广州双喜(细支01)": 126.5,
    "广州双喜(喜花悦)": 136,
    "广州双喜(红邮喜)": 162,
    "广州双喜(软盛世喜)": 245,
    "广州双喜(经典1906)": 134,
    "广州双喜(世纪经典)": 179,
    "广州双喜(工坊经典)": 161,
    "广州双喜(典藏春天)": 194,
    "广州双喜(细支春天)": 194,
    "广州双喜(国喜细)": 271,
    "广州双喜(勿忘我)": 164,
    "广州双喜(蟾路里)": 207,
    
    // 其他品牌
    "红玫(硬金)": 95.7,
    "红玫王(硬至尊)": 116.2,
    "红玫王(合至尊)": 134.7,
    "红玫王(硬至尊)": 146.2,
    "红玫王(硬红)": 122,
    "红玫王(软红)": 170.7,
    "五叶神(硬红)": 170,
    "软芙蓉": 79.5,
    "软红河": 79.5,
    "合椰树 (原味2号型)": 26.5,
    "王大远 (迷你冰你)": 200,
    "大前门(短)": 94.7,
    "红金龙(金红龙)": 73,
    "兰州(精品)": 92,
    "兰州(珍品)": 164,
    "兰州(黑中支)": 183,
    "黄山(一品红)": 86.5,
    "黄山(金印象)": 135.7,
    "黄山(软记忆)": 85.5,
    "黄山(新记忆)": 109.5,
    "黄山(金皖烟)": 235,
    "黄山(徽商新概念)": 327,
    "黄山(徽商商)": 327,
    "黄山(细红方印)": 184,
    "黄山(中红方印)": 208,
    "长城(陈皮)": 132,
    "长城(醇雅)": 132,
    "555(双冰)": 265,
    "555(金冰)": 162,
    "555(细老版)": 213,
    "555(国际版)": 245,
    "南洋(中爱国)": 245,
    "南洋(1905)": 102,
    "南洋(软)": 102,
    "南洋(龙凤紫)": 107,
    "紫气东来(吉祥样)": 202,
    "紫气东来(吉祥样)": 192,
    "恒大(中支)": 195,
    "恒大(方1949)": 115,
    "老巴夺(中支)": 102,
    "钓鱼台(蓝细支)": 410,
    "钓鱼台(中支黄)": 410,
    "钓鱼台(天蓝中支)": 153,
    "钓鱼台(中支支)": 153,
    "黄果树(长征)": 79.7,
    "黄果树(长征)": 86.7,
    "贵烟(新贵)": 111,
    "贵烟(跨越)": 137.5,
    "贵烟(行者无疆)": 205.5,
    "贵烟(细百无)": 228,
    "贵烟(行者合)": 996,
    "贵烟(细萃)": 164,
    "贵烟(红中支)": 202,
    "贵烟(福中支)": 202,
    "贵烟(国酒30年)": 372,
    "贵烟(细支国酒)": 103,
    "泰山(宏图)": 117.4,
    "泰山(软宏图)": 164,
    "泰山(合青秀)": 122,
    "泰山(细合悦)": 142,
    "泰山(心悦悦)": 209,
    "泰山(中儒风)": 249,
    "泰山(茉莉韵香)": 390,
    "泰山(白将军)": 124,
    "泰山(红将军)": 92,
    "金圣(白庐山)": 78.5,
    "金圣(合白)": 78,
    "金圣(吉品)": 117,
    "金圣(硬吉品)": 208.5,
    "金圣(青瓷)": 146,
    "金圣(细支青苍瓷)": 146,
    "金圣(滕王阁)": 116.5,
    "金圣(细蓝紫光)": 130.5,
    "金圣(细智圣国味)": 130,
    "金圣(红时代)": 85.7,
    "娇子(合X白)": 99,
    "娇子(软轿子)": 81.5,
    "娇子(格调)": 127,
    "娇子(格调细)": 128,
    "娇子(时代)": 98,
    "龙凤呈祥(朝天门)": 74,
    "龙凤呈祥(硬)": 86.7,
    "龙凤呈祥(珍品)": 116,
    "龙凤呈祥(花开富贵)": 76,
    "龙凤呈祥(龙行龙风)": 136.5,
    "龙凤呈祥(细龙)": 118,
    "七匹狼(纯合)": 93,
    "七匹狼(蓝钻)": 134.5,
    "七匹狼(纯雅)": 122,
    "七匹狼(乘风启航)": 179,
    "七匹狼(白)": 76,
    "七匹狼(中支金标)": 213,
    "七匹狼(金砖冰爆)": 200,
    "七匹狼(中支纯境)": 142,
    "七匹狼(古田红军)": 176,
    "七匹狼(古田旧)": 390,
    "七匹狼(金细支彬影)": 178,
    "好猫(金沙猴王)": 78.7,
    "好猫(金丝猴王)": 145,
    "好猫(中支金丝猴)": 154,
    "好猫(黑招财猫)": 145,
    "好猫(细长乐巷)": 142,
    "好猫(长乐九美)": 209,
    "好猫(印象长安)": 149,
    "好猫(细天乐巷)": 166,
    "好猫(细吉祥天)": 220,
    "好猫(细冰炫)": 220,
    "大青山(合长丰)": 72.5,
    "贵烟(跨越)": 137.5,
    "利群(红)": 174,
    "利群(软蓝)": 161,
    "利群(软红)": 132,
    "利群(长嘴)": 162,
    "利群(合长叶)": 193.5,
    "利群(软长叶)": 202,
    "利群(夜西湖)": 172,
    "利群(细阳光)": 307,
    "利群(楼外楼)": 1173,
    "利群(江南忆)": 229,
    "利群(西子阳光)": 276.4,
    "利群(春中)": 272,
    "利群(细烟味) SZ": 1300,
    "人民大会堂(细支)": 152,
    "人民大会堂(金细支)": 173,
    "人民大会堂(红中)": 213,
    "人民大会堂(方糖盒)": 216,
    "万宝路(软红万)": 165,
    "万宝路(合金万)": 199,
    "爱喜(爆味倍字)": 165,
    "黄鹤楼(冰媚)": 283,
    "黄鹤楼(软蓝)": 158,
    "黄鹤楼(合蓝) 空心楼(195)": 191.7,
    "黄鹤楼(银紫)": 143,
    "黄鹤楼(银紫)": 144,
    "黄鹤楼(合奇景)": 238,
    "黄鹤楼(8度)": 168,
    "黄鹤楼(嘉禧缘)": 178.5,
    "黄鹤楼(天下名楼)": 155,
    "黄鹤楼(峡谷情)": 245.2,
    "黄鹤楼(珍品珍品)": 726,
    "黄鹤楼(中支蓝楼)": 232,
    "黄鹤楼(硬雅香)": 345.5,
    "黄鹤楼(峡谷柔情)": 270,
    "黄鹤楼(细支峡谷情)": 249,
    "黄鹤楼(1916)": 715,
    "黄鹤楼(细1916)": 635,
    "黄鹤楼(如意16)": 745,
    "黄鹤楼(中支1916新版)": 1050,
    "黄鹤楼(大视野)": 940,
    "黄鹤楼(15年1916)": 730,
    "黄鹤楼(红珠1916)": 1650,
    "南京(合黄)": 750,
    "南京(中支)": 189,
    "南京(千里江山)": 695,
    "南京(九五)": 713,
    "南京(九五)": 710,
    "南京(细九五)": 695,
    "南京(炫赫门)": 192,
    "南京(细支梦都)": 172.2,
    "南京(十二薄荷)": 232.8,
    "南京(青大观园)": 260,
    "南京(雨花石)": 441,
    "南京(细雨花石)": 566,
    "苏烟(软五星)": 359,
    "苏烟(软金砂)": 359,
    "苏烟(中支多彩)": 359,
    "苏烟(中支多彩)": 359,
    "和天下(大)": 726,
    "和天下(细支)": 730,
    "和天下(中支)": 730,
    "冬虫夏草(细支和润)": 371,
    "冬虫夏草(享中)": 312,
    "冬虫夏草(细支罗梭)": 260,
    "冬虫夏草(红中支)": 441,
    "冬虫夏草(硬中支)": 556,
    "冬虫夏草(硬金盛世)": 388,
    "和和气生财": 468,
    "和生财(大支)": 388,
    "宝岛一品沉香": 359,
    "黄金叶(十渠叶)": 126.5,
    "黄金叶(金满堂)": 107.9,
    "黄金叶(乐途)": 127.7,
    "黄金叶(喜满堂)": 114.8,
    "黄金叶(细乐途)": 145.5,
    "黄金叶(乐途)": 128.5,
    "黄金叶(中支乐途)": 199,
    "黄金叶(细支商)": 173,
    "黄金叶(中支国色)": 159,
    "黄金叶(粗支天香)": 153.3,
    "黄金叶(细天香)": 439,
    "黄金叶(天叶)": 712,
    "黄金叶(细天叶)": 412,
    "黄金叶(细天叶)": 139,
    "黄金叶(细支天叶)": 1000,
    "黄金叶(细支天叶)": 249,
    "钻石(合红)": 92,
    "钻石(软绿)": 127,
    "白沙(软白沙)": 89,
    "白沙(合白沙)": 88.7,
    "白沙(精品二代)": 111,
    "白沙(精品二代)": 105,
    "白沙(硬精品)": 129.7,
    "白沙(开心就好)": 168,
    "白沙(尚品蓝)": 133.2,
    "白沙(鸿运当头)": 147,
    "白沙(红777)": 141.5,
    "长白山(软红)": 109,
    "长白山(细迎春)": 165,
    "长白山(中支迎)": 147,
    "长白山(细蓝)": 166,
    "玉溪(软阿诗玛)": 142,
    "玉溪(软)": 189.2,
    "玉溪(硬)": 184.2,
    "玉溪(软尚善)": 223,
    "玉溪(硬蓝玉)": 280,
    "玉溪(初心)": 245,
    "玉溪(合初心)": 324,
    "玉溪(高支和)": 173,
    "玉溪(中支玉液)": 216,
    "玉溪(细支中支)": 474,
    "云烟(软紫云)": 119.5,
    "云烟(紫红云)": 115.5,
    "云烟(软紫福云)": 97.5,
    "云烟(细云龙)": 121,
    "云烟(黑云龙)": 125,
    "云烟(细云龙)": 456,
    "云烟(细云龙)": 121,
    "荷花(钻石)": 313,
    "荷花(软)": 348,
    "荷花(小支)": 385,
    "大重九(中支)": 430,
    "大重九(细青支)": 433,
    "大重九(9+1)": 438,
    "大重九(细)": 702,
    "大重九(中支)": 720,
    "牡丹(软)": 151.7,
    "牡丹(软333)": 151.7,
    "牡丹(飞马)": 140,
    "牡丹(青中)": 226,
    "牡丹(红中支)": 225,
    "牡丹(蓝中支)": 277.5,
    "牡丹(细蓝彩)": 263,
    "上海喜(金上海)": 552,
    "中南海(合八喜)": 123,
    "中南海(金8mg)": 87,
    "中南海(5mg)": 113.5,
    "中南海(8mg)": 103,
    "中南海(典8)": 203,
    "中南海(中支冰耀)": 206
};

// DOM 元素
const productInput = document.getElementById('product-input');
const result = document.getElementById('result');
const productList = document.getElementById('product-list');

// 初始化产品列表
function initProductList() {
    productList.innerHTML = '';
    for (const [product, price] of Object.entries(productPrices)) {
        const li = document.createElement('li');
        li.innerHTML = `
            <span>${product}</span>
            <span class="price">¥${price.toFixed(2)}</span>
        `;
        productList.appendChild(li);
    }
}

// 显示结果
function showResult(message, isSuccess) {
    result.textContent = message;
    result.className = `result ${isSuccess ? 'success' : 'error'}`;
}

// 查找产品价格
function findProductPrice(productName) {
    const trimmedName = productName.trim();
    if (!trimmedName) {
        showResult('请输入产品名称', false);
        return;
    }

    // 不区分大小写查找
    const lowercaseName = trimmedName.toLowerCase();
    let foundProduct = null;
    let foundPrice = null;

    for (const [product, price] of Object.entries(productPrices)) {
        if (product.toLowerCase() === lowercaseName) {
            foundProduct = product;
            foundPrice = price;
            break;
        }
    }

    if (foundProduct) {
        showResult(`${foundProduct}的价格是：¥${foundPrice.toFixed(2)}`, true);
    } else {
        showResult(`未找到产品：${trimmedName}`, false);
    }
}

// 模糊查询产品
function fuzzySearchProducts(keyword) {
    const trimmedKeyword = keyword.trim();
    if (!trimmedKeyword) {
        return [];
    }

    const lowercaseKeyword = trimmedKeyword.toLowerCase();
    const matchedProducts = [];

    for (const [product, price] of Object.entries(productPrices)) {
        if (product.toLowerCase().includes(lowercaseKeyword)) {
            matchedProducts.push({ product, price });
        }
    }

    return matchedProducts;
}

// 显示搜索建议
function showSearchSuggestions(products) {
    // 清除之前的建议
    const existingSuggestions = document.getElementById('suggestions');
    if (existingSuggestions) {
        existingSuggestions.remove();
    }

    if (products.length === 0) {
        return;
    }

    // 创建建议列表
    const suggestions = document.createElement('div');
    suggestions.id = 'suggestions';
    suggestions.className = 'suggestions';

    // 限制显示的建议数量
    const maxSuggestions = 10;
    const displayProducts = products.slice(0, maxSuggestions);

    displayProducts.forEach(({ product, price }) => {
        const suggestionItem = document.createElement('div');
        suggestionItem.className = 'suggestion-item';
        suggestionItem.innerHTML = `
            <span>${product}</span>
            <span class="price">¥${price.toFixed(2)}</span>
        `;

        // 点击建议项时填充输入框并显示价格
        suggestionItem.addEventListener('click', () => {
            productInput.value = product;
            findProductPrice(product);
            suggestions.remove();
        });

        suggestions.appendChild(suggestionItem);
    });

    // 添加到form-group元素中，这样搜索建议会显示在输入框下方
    const formGroup = document.querySelector('.form-group');
    formGroup.appendChild(suggestions);
}

// 事件监听
productInput.addEventListener('input', function() {
    const keyword = this.value;
    
    // 模糊搜索并显示建议
    const matchedProducts = fuzzySearchProducts(keyword);
    showSearchSuggestions(matchedProducts);
    
    // 更新提示信息
    if (!keyword.trim()) {
        showResult('请输入产品名称', false);
    } else if (matchedProducts.length === 0) {
        showResult('未找到匹配的产品，请尝试其他关键词', false);
    } else {
        showResult(`找到 ${matchedProducts.length} 个匹配产品，请从下方选择`, true);
    }
});

// 初始化
initProductList();